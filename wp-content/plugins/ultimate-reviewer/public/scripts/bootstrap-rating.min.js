!function(c,d){"use strict";function a(t,i){var n;this.$input=c(t),this.$rating=c("<span class='gpur-bootstrap-wrapper'></span>").css({cursor:"default"}).insertBefore(this.$input),this.options=((n=c.extend({},this.$input.data(),i)).start=parseInt(n.start,10),n.start=isNaN(n.start)?d:n.start,n.stop=parseInt(n.stop,10),n.stop=isNaN(n.stop)?n.start+5||d:n.stop,n.step=parseInt(n.step,10)||d,n.fractions=Math.abs(parseInt(n.fractions,10))||d,n.scale=Math.abs(parseInt(n.scale,10))||d,(n=c.extend({},c.fn.rating.defaults,n)).filledSelected=n.filledSelected||n.filled,n),this._init()}a.prototype={_init:function(){for(var s=this,n=this.$input,t=this.$rating,i=function(i){return function(t){n.prop("disabled")||n.prop("readonly")||n.data("readonly")!==d||i.call(this,t)}},o=1;o<=this._rateToIndex(this.options.stop);o++){var a=c('<div class="rating-symbol"></div>').css({display:"inline-block",position:"relative"});c('<div class="rating-symbol-background '+this.options.empty+'"></div>').appendTo(a),c('<div class="rating-symbol-foreground"></div>').append('<span class="'+this.options.filled+'"></span>').css({display:"inline-block",position:"absolute",overflow:"hidden",left:0,right:0,width:0}).appendTo(a),t.append(a),this.options.extendSymbol.call(a,this._indexToRate(o))}this._updateRate(n.val()),n.on("change",function(){s._updateRate(c(this).val())});var e,r=function(t){var i=c(t.currentTarget),n=Math.abs((t.pageX||t.originalEvent.touches[0].pageX)-(("rtl"===i.css("direction")&&i.width())+i.offset().left));return n=0<n?n:.1*s.options.scale,i.index()+n/i.width()},l="mousedown touchstart",p="mousemove touchmove",h="mouseleave touchend";/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream&&(l="touchstart",p="touchmove",h="touchend"),t.on(l,".rating-symbol",i(function(t){n.val(s._indexToRate(r(t))).change()})).on(p,".rating-symbol",i(function(t){var i=s._roundToFraction(r(t));i!==e&&(e!==d&&c(this).trigger("rating.rateleave"),e=i,c(this).trigger("rating.rateenter",[s._indexToRate(e)])),s._fillUntil(i)})).on(h,".rating-symbol",i(function(){e=d,c(this).trigger("rating.rateleave"),s._fillUntil(s._rateToIndex(parseFloat(n.val())))}))},_fillUntil:function(t){var i=this.$rating,n=Math.floor(t);i.find(".rating-symbol-background").css("visibility","visible").slice(0,n).css("visibility","hidden");var s=i.find(".rating-symbol-foreground");s.width(0),s.slice(0,n).width("auto").find("span").attr("class",this.options.filled),s.eq(t%1?n:n-1).find("span").attr("class",this.options.filledSelected),s.eq(n).width(t%1*100+"%")},_indexToRate:function(t){return this.options.start+Math.floor(t)*this.options.step+this.options.step*this._roundToFraction(t%1)},_rateToIndex:function(t){return(t-this.options.start)/this.options.step},_roundToFraction:function(t){var i=Math.ceil(t%1*this.options.fractions)/this.options.fractions,n=Math.pow(10,this.options.scale);return Math.floor(t)+Math.floor(i*n)/n},_contains:function(t){var i=0<this.options.step?this.options.start:this.options.stop,n=0<this.options.step?this.options.stop:this.options.start;return i<=t&&t<=n},_updateRate:function(t){var i=parseFloat(t);this._contains(i)?(this._fillUntil(this._rateToIndex(i)),this.$input.val(i)):""===t&&(this._fillUntil(0),this.$input.val(""))},rate:function(t){if(t===d)return this.$input.val();this._updateRate(t)}},c.fn.rating=function(n){var s,o=Array.prototype.slice.call(arguments,1);return this.each(function(){var t=c(this),i=t.data("rating");i||t.data("rating",i=new a(this,n)),"string"==typeof n&&"_"!==n[0]&&(s=i[n].apply(i,o))}),s!==d?s:this},c.fn.rating.defaults={filled:"glyphicon glyphicon-star",filledSelected:d,empty:"glyphicon glyphicon-star-empty",start:0,stop:5,step:1,fractions:1,scale:3,extendSymbol:function(t){}},c(function(){c("input.rating").rating()})}(jQuery);